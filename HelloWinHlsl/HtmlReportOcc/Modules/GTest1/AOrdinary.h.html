<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>AOrdinary.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
ï»¿// ClientApp/Present/AOrdinary.h - the usual display of the rendered frame on the screen.
#pragma once
namespace prj_3d::HelloWinHlsl::ClientApp::Present { 

template&lt;class T&gt; class AOrdinary { };

template&lt;&gt; class AOrdinary&lt;DxVer::v9&gt; : public ABaseClientApp&lt; DxVer::v9 &gt; { 
	using TInnerDxVer = DxVer::v9;
public:
    typedef uptr&lt; AOrdinary &gt; uptr_t;
<span style = "background-color:#fdd">	virtual void present_to_screen(typename Dx::Ctx::CtxDx&lt;TInnerDxVer&gt;::cref_ptr_t crpustDxCtx, Dx::ClientDynamicData&lt;TInnerDxVer&gt;::cref_ptr_t) override {
	    crpustDxCtx -&gt;m_pcD3dDevice -&gt;Present( NULL, NULL, NULL, NULL );
	}</span>
};

template&lt;&gt; class AOrdinary&lt;DxVer::v10&gt; : public ABaseClientApp&lt; DxVer::v10 &gt; { 
	using TInnerDxVer = DxVer::v10;
public:
    typedef uptr&lt; AOrdinary &gt; uptr_t;
	virtual void present_to_screen(typename Dx::Ctx::CtxDx&lt;TInnerDxVer&gt;::cref_ptr_t crpustDxCtx, Dx::ClientDynamicData&lt;TInnerDxVer&gt;::cref_ptr_t) override {
// TODO: if( GetDXUTState().GetRenderingOccluded() ) Do not present the frame to the output. 
//	The status of the swap chain will be tested and appropriate errors returned. 
//	DXGI_PRESENT_TEST is intended for use only when switching from the idle state; 
//	do not use it to determine when to switch to the idle state because doing so can 
//	leave the swap chain unable to exit full-screen mode.
		//dwFlags = DXGI_PRESENT_TEST; else {
		// ...\directx-sdk-legacy-samples\DXUT\Core\DXUT.cpp:3684:DXUTSetD3D10Device
		//// Fill out the rest of the device settings struct
		//DeviceSettings = { 0 };
		//DeviceSettings.d3d10.DriverType = D3D10_DRIVER_TYPE_HARDWARE;
		//dwFlags = GetDXUTState().GetCurrentDeviceSettings()-&gt;d3d10.PresentFlags;
		//} but you also need to disable frame rendering, i.e. gameLoop change.
		DWORD dwFlags = 0; // ...\directx-sdk-legacy-samples\DXUT\Core\DXUT.cpp:1421:DXUTStaticWndProc
		UINT uiSyncInterval = DXGI_SWAP_EFFECT_DISCARD;
        HRESULT hrPresent = crpustDxCtx -&gt;m_pcDxgiSwapChain -&gt;Present( uiSyncInterval, dwFlags );
		// The window is blocked completely (or, for example, minimized).
		if (DXGI_STATUS_OCCLUDED == hrPresent) {}
		else if( DXGI_ERROR_DEVICE_RESET == hrPresent ) {}
		else if( DXGI_ERROR_DEVICE_REMOVED == hrPresent ) {}
		else if( SUCCEEDED( hrPresent ) ) {}
	}
    virtual ~AOrdinary() {
    }
};

template&lt;&gt; class AOrdinary&lt;DxVer::v11&gt; : public ABaseClientApp&lt; DxVer::v11 &gt; { 
	using TInnerDxVer = DxVer::v11;
public:
    typedef uptr&lt; AOrdinary &gt; uptr_t;
	virtual void present_to_screen(typename Dx::Ctx::CtxDx&lt;TInnerDxVer&gt;::cref_ptr_t crpustDxCtx, Dx::ClientDynamicData&lt;TInnerDxVer&gt;::cref_ptr_t) override {
		DWORD dwFlags = 0; // ...\directx-sdk-legacy-samples\DXUT\Core\DXUT.cpp:1421:DXUTStaticWndProc
		UINT uiSyncInterval = DXGI_SWAP_EFFECT_DISCARD;
        HRESULT hrPresent = crpustDxCtx -&gt;m_pcDxgiSwapChain -&gt;Present( uiSyncInterval, dwFlags );
		// The window is blocked completely (or, for example, minimized).
		if (DXGI_STATUS_OCCLUDED == hrPresent) {}
		else if( DXGI_ERROR_DEVICE_RESET == hrPresent ) {}
		else if( DXGI_ERROR_DEVICE_REMOVED == hrPresent ) {}
		else if( SUCCEEDED( hrPresent ) ) {}
	}
    virtual ~AOrdinary() {
    }
};

template&lt;&gt; class AOrdinary&lt;DxVer::v12&gt; : public ABaseClientApp&lt; DxVer::v12 &gt; { 
	using TInnerDxVer = DxVer::v12;

 public:
    typedef uptr&lt; AOrdinary &gt; uptr_t;
	virtual void present_to_screen(typename Dx::Ctx::CtxDx&lt;TInnerDxVer&gt;::cref_ptr_t crpustDxCtx, Dx::ClientDynamicData&lt;TInnerDxVer&gt;::cref_ptr_t crpsoDynamic) override {
		UINT presentFlags = 0;
		if ( crpustDxCtx -&gt;detail_.m_bTearingSupport &amp;&amp; crpsoDynamic -&gt;m_isWindowed )
			presentFlags |= DXGI_PRESENT_ALLOW_TEARING;
		// DXGI_SWAP_EFFECT_SEQUENTIAL
		UINT uiSyncInterval = DXGI_SWAP_EFFECT_DISCARD;
        HRESULT hrPresent = crpustDxCtx -&gt;m_pcDxgiSwapChain -&gt;Present( uiSyncInterval, presentFlags );
		// The window is blocked completely (or, for example, minimized).
		if (DXGI_STATUS_OCCLUDED == hrPresent) {}
		else if( DXGI_ERROR_DEVICE_RESET == hrPresent ) {}
		else if( DXGI_ERROR_DEVICE_REMOVED == hrPresent ) {}
		else if( SUCCEEDED( hrPresent ) ) {}
	}
    virtual ~AOrdinary() {
    }
};
} // namespace prj_3d::HelloWinHlsl::ClientApp::Present</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>