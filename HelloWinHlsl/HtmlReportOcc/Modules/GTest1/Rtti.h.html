<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>Rtti.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
ï»¿// Sys/Rtti.h - helper RTTI(/GR+)
#pragma once
namespace prj_3d::HelloWinHlsl::Sys { 
class Rtti {
	static const unsigned int c_uMscVer = _MSC_FULL_VER;
	// magic! Set you own version compiler of Microsoft Visual Studio
	//static const unsigned int c_uValidAbiVerForRttiCheck = 192930141; // MSVS 2019 community
	static const unsigned int c_uValidAbiVerForRttiCheck = 193431937; // MSVS 2022 community
public:
	template&lt;class T&gt;
	static 
	std::string 
<span style = "background-color:#fdd">	getClassName(Ty::CurClientApp&lt;T&gt; *poClientApp) {
		std::string strClassName;</span>
		// Or there will be an exception if the client disables the RTTI(/GR-) library, and then it cannot be fixed by defining _CPPRTTI, because this *.obj has already been compiled.		
		//	@insp C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.29.30133\crt\src\vcruntime\rtti.cpp#GetCompleteObjectLocatorFromObject
		//	only for my studio version.
#ifdef _CPPRTTI
		if constexpr ( c_uMscVer == c_uValidAbiVerForRttiCheck ) {
			if ( static_cast&lt; void*** &gt;( (void *)poClientApp )[0][-1] )
				strClassName = typeid( *poClientApp ).name( );
		}
#endif // _CPPRTTI
		// remove "class " substring in begin string
<span style = "background-color:#fdd">		if ( strClassName.length( ) ) // cppcheck-suppress knownConditionTrueFalse
			strClassName = strClassName.substr( _countof( "class " ) - 1 );
		return strClassName;
	}</span>

	template&lt;class T1, class T2&gt;
	static 
	bool
<span style = "background-color:#fdd">	IsTypesEqual() {
		return typeid( T1 ).hash_code( ) == typeid( T2 ).hash_code( );
	}</span>
};
} // namespace prj_3d::HelloWinHlsl::Sys</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>