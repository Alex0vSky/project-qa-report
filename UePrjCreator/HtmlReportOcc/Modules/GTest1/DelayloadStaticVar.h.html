<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>DelayloadStaticVar.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
// src\DelayloadStaticVar.h - when dll is Delayload, static variable cannot be referenced directly
#pragma once // Copyright 2023 Alex0vSky (https://github.com/Alex0vSky)
namespace prj_3d { namespace UePrjCreator { namespace DelayloadStaticVar {
struct GetAddressBySymbol { 
	class ScopedFree { 
		HMODULE m_h;
	public:
<span style = "background-color:#fdd">		explicit ScopedFree(HMODULE h) : m_h( h )
		{}</span>
		~ScopedFree()
<span style = "background-color:#fdd">		{ if ( m_h ) ::FreeLibrary( m_h ); }</span>
	};
	static bool UE4Editor_Core( 
		ELogTimes::Type *&amp;pGPrintLogTimes
		, FOutputDeviceError **&amp;pGError
		, FFeedbackContext **&amp;pGWarn
		, FSimpleMulticastDelegate *&amp;pOnInit
<span style = "background-color:#fdd">	) {</span>
		FARPROC p;
<span style = "background-color:#fdd">		HMODULE h = ::LoadLibraryA( "UE4Editor-Core.dll" );
		if ( !h )
			return false;
		ScopedFree anon( h );</span>

		// origin Engine\Source\Editor\HardwareTargeting\Public\HardwareTargetingSettings.h
<span style = "background-color:#fdd">		p = ::GetProcAddress( h, "?GPrintLogTimes@@3W4Type@ELogTimes@@A" );
		if ( !p )
			return false;
		pGPrintLogTimes = reinterpret_cast&lt;ELogTimes::Type *&gt;( p );</span>

		// origin Engine\Source\Runtime\Core\Public\CoreFwd.h
<span style = "background-color:#fdd">		p = ::GetProcAddress( h, "?GWarn@@3PEAVFFeedbackContext@@EA" );
		if ( !p )
			return false;
		pGWarn = reinterpret_cast&lt;FFeedbackContext **&gt;( p );</span>

<span style = "background-color:#fdd">		p = ::GetProcAddress( h, "?GError@@3PEAVFOutputDeviceError@@EA" );
		if ( !p )
			return false;
		pGError = reinterpret_cast&lt;FOutputDeviceError **&gt;( p );</span>

		// origin Engine\Source\Runtime\Core\Public\Delegates\Delegate.h
		// origin Engine\Source\Runtime\Core\Public\Misc\CoreDelegates.h
		// call for example Broadcast( ) look like FCoreDelegates::OnInit.Broadcast( )
<span style = "background-color:#fdd">		p = ::GetProcAddress( h, </span>
"?OnInit@FCoreDelegates@@2V?$TMulticastDelegate@$$A6AXXZUFDefaultDelegateUserPolicy@@@@A" );
<span style = "background-color:#fdd">		if ( !p )
			return false;
		pOnInit = reinterpret_cast&lt;FSimpleMulticastDelegate *&gt;( p );</span>

<span style = "background-color:#fdd">		return true;
	}</span>
};
}}} // namespace prj_3d::UePrjCreator::DelayloadStaticVar</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>