<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>HeapMem.h</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
// src\Tool\HeapMem.h - allocations tiny code
#pragma once // Copyright 2023 Alex0vSky (https://github.com/Alex0vSky)
namespace prj_sysw { namespace TinySynapticsScroll { namespace Tool { 
class HeapMem {
	mutable size_t m_cbAllocSize;
	mutable LPBYTE m_lpMem;
<span style = "background-color:#dfd">	static LPBYTE alloc_(size_t cbAllocSize) {
		auto p = ::HeapAlloc( ::GetProcessHeap( ), HEAP_ZERO_MEMORY, cbAllocSize );
		return static_cast&lt;LPBYTE&gt;( p );
	}</span>
	
 public:
	// Its "MAX_VALUE_NAME 16383" for registry
	static const size_t c_uDefaultAllocSize = 16383;
	explicit HeapMem(size_t cbAllocSize = c_uDefaultAllocSize) 
<span style = "background-color:#dfd">		: m_cbAllocSize( cbAllocSize )
		, m_lpMem( alloc_( cbAllocSize ) )
    {}
	~HeapMem() {
		::HeapFree( ::GetProcessHeap( ), 0, m_lpMem );
	}
	void *getMemPtr() const {
		return m_lpMem;
	}
	size_t getSize() const {
		return m_cbAllocSize;
	}</span>

	// TEST
	HeapMem(const HeapMem &amp;rhs) 
<span style = "background-color:#dfd">		: m_cbAllocSize ( rhs.m_cbAllocSize )
		, m_lpMem( alloc_( rhs.m_cbAllocSize ) ) { 
		for ( size_t i = 0; i &lt; m_cbAllocSize; ++i )
			m_lpMem[ i ] = rhs.m_lpMem[ i ];
	}
	HeapMem&amp; operator=(const HeapMem &amp;rhs) {
		std::swap( m_cbAllocSize, rhs.m_cbAllocSize ); // NOLINT(build/include_what_you_use)
		std::swap( m_lpMem, rhs.m_lpMem ); // NOLINT(build/include_what_you_use)
		return *this;
	}</span>
};
}}} // namespace prj_sysw::TinySynapticsScroll::Tool _</pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>